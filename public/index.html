<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Tutor Bíblico Tito</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #fef9f4;
      color: #2d3436;
      max-width: 650px;
      margin: auto;
      padding: 2rem;
    }
    .card {
      background-color: #f5f8fa;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0px 2px 8px rgba(0,0,0,0.1);
      margin-bottom: 20px;
    }
    #tito-img {
      cursor: pointer;
      width: 120px;
      border-radius: 50%;
      margin-right: 20px;
      transition: transform 0.3s ease;
    }
 #globo-tito {
  display: none;
  position: absolute;
  background-color: #fff;
  border: 2px solid #3498db;
  border-radius: 10px;
  padding: 10px;
  max-width: 300px;
  box-shadow: 2px 2px 8px rgba(0,0,0,0.2);
  z-index: 10;
  font-size: 1rem;
  left: 130px; /* posición a la derecha de Tito */
  top: 20px;
}

#globo-tito::after {
  content: "";
  position: absolute;
  top: 20px;
  left: -20px; /* piquito del globo en el borde izquierdo */
  border-width: 10px;
  border-style: solid;
  border-color: transparent #3498db transparent transparent;
}

    button {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      cursor: pointer;
      margin-right: 10px;
      margin-top: 10px;
    }
    .btn-enviar { background-color: #3498db; color: white; }
    .btn-dictar { background-color: #27ae60; color: white; }
    .btn-detener { background-color: #e74c3c; color: white; }
    textarea {
      width: 100%;
      height: 100px;
      padding: 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
      margin-bottom: 10px;
    }
    #menu-biblia button {
      background-color: #3498db;
      color: white;
      width: 100%;
      padding: 10px;
      margin-bottom: 5px;
      text-align: left;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    .acordeon-contenido {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.4s ease, padding 0.4s ease;
    }
    .acordeon-contenido.activo {
      max-height: 500px;
      padding: 10px;
    }
    .btn-biblia {
  background-color: #8e44ad; /* morado */
  color: white;
  padding: 10px 20px;
  border: none;
  border-radius: 8px;
  font-size: 1rem;
  cursor: pointer;
  margin-top: 10px;
  margin-bottom: 10px;
  width: 100%;
}

  </style>
</head>
<body>
  <div style="position: relative; display: flex; align-items: center; background-color: #f5f8fa; border-radius: 12px; padding: 20px; box-shadow: 0px 2px 8px rgba(0,0,0,0.1); margin-bottom: 20px;">
    <div id="globo-tito"></div>
    <img id="tito-img" src="Tito parado.jpg" alt="Tutor Tito"
         ondblclick="titoBromea()" onclick="titoClickHandler()" />
    <p id="presentacion-texto">
      Hola soy <strong>Tito</strong>, tu tutor virtual. Estoy para acompañarte en tu aprendizaje bíblico.
    </p>
  </div>

  <h1>📖 Tutor Bíblico IA</h1>
  <textarea id="pregunta" placeholder="Escribe tu pregunta aquí..."></textarea><br>
  <button class="btn-enviar" onclick="enviarPregunta()">Enviar pregunta</button>
  <button class="btn-dictar" onclick="iniciarDictado()">🎤 Dictar</button>
  <button class="btn-detener" onclick="detenerVoz()">⏹️ Detener voz</button>
  <h3>Respuesta:</h3>
  <div id="respuesta" style="background-color: #f5f5f5; padding: 10px; border-radius: 8px;"></div>

  <button class="btn-biblia" onclick="toggleMenu()">📘 Aprende sobre la Biblia</button>

  <div id="menu-biblia"></div>

  <script>
    let clickCount = 0, clickTimer;
    const globo = document.getElementById("globo-tito");
    const consejos = [
      "Confía en el Señor con todo tu corazón (Proverbios 3,5).",
      "Ama a tu prójimo como a ti mismo (Mateo 22,39).",
      "Busca primero el Reino de Dios (Mateo 6,33).",
      "Todo lo puedo en Cristo que me fortalece (Filipenses 4,13).",
      "Bienaventurados los que tienen hambre de justicia (Mateo 5,6)."
    ];
    let consejoIndex = 0;

    function titoClickHandler() {
      clickCount++;
      clearTimeout(clickTimer);
      clickTimer = setTimeout(() => {
        if (clickCount === 1) presentarseTito();
        else if (clickCount === 3) mostrarConsejo();
        clickCount = 0;
      }, 400);
    }

    function mostrarConsejo() {
  const consejo = consejos[consejoIndex];
  globo.textContent = consejo;
  globo.style.display = "block";
  const leido = consejo.replace(/([^\(]+)\s(\d+),\s?(\d+)/g, (_, libro, cap, vers) => `${libro} capítulo ${cap} versículo ${vers}`);
  hablarConCallback(leido, () => globo.style.display = "none");
  consejoIndex = (consejoIndex + 1) % consejos.length;
}

    function toggleMenu() {
      const menu = document.getElementById("menu-biblia");
      if (menu.innerHTML === "") {
const temas = [
  {
    titulo: '1. ¿Qué es la Biblia?',
    contenido: 'La Biblia es la Palabra de Dios en lenguaje humano. Inspirada por el Espíritu Santo, revela progresivamente el plan de salvación, desde la creación hasta la redención en Cristo. No es un dictado divino, sino una colección de libros escritos en contextos históricos y culturales diversos, que forman una unidad profunda en torno a la alianza de Dios con su pueblo. Esta unidad se articula en torno a una historia sagrada que culmina en Jesucristo, Verbo encarnado. Así, la Biblia es norma de fe y vida, alimento espiritual y guía segura para la comunidad creyente.'
  },
  {
    titulo: '2. Inspiración y Revelación',
    contenido: 'La revelación es la iniciativa libre y amorosa de Dios para darse a conocer al ser humano en la historia, culminando en Jesucristo. La inspiración, en cambio, es la acción del Espíritu Santo que mueve a los autores bíblicos a escribir lo que Dios quiere comunicar, respetando su libertad, cultura y estilo. Así, la Escritura es verdadera Palabra de Dios en palabras humanas. No hay contradicción entre lo divino y lo humano, sino cooperación. Esta doctrina permite una lectura creyente de la Biblia, que reconoce en el texto sagrado un mensaje eterno, vivo y eficaz.'
  },
  {
    titulo: '3. El canon de la Biblia',
    contenido: 'El canon bíblico es el conjunto de libros reconocidos como inspirados por la Iglesia. En el catolicismo, incluye 46 libros del Antiguo Testamento y 27 del Nuevo. Este reconocimiento no fue inmediato, sino fruto de un discernimiento guiado por el Espíritu y realizado en la vida litúrgica, la tradición apostólica y la recepción comunitaria. El canon fue definido progresivamente, especialmente en los concilios del siglo IV y ratificado en Trento. Su formación muestra que la Biblia nace en la comunidad de fe, no como un texto aislado, sino como norma viva para la vida cristiana.'
  },
  {
    titulo: '4. Tipos, géneros y formas literarias',
    contenido: 'La Biblia contiene una pluralidad de géneros: narraciones históricas, leyes, profecías, poesía sapiencial, evangelios, cartas, apocalipsis, etc. Cada forma literaria responde a un contexto cultural y transmite una verdad teológica según su propio lenguaje simbólico. Leer la Escritura correctamente exige identificar el género, el contexto, la intención del autor sagrado y el mensaje central. Por ejemplo, un salmo no se interpreta como una crónica, ni una parábola como historia literal. La exégesis respeta esta diversidad como riqueza y como clave para acceder al mensaje revelado de forma fiel y profunda.'
  },
  {
    titulo: '5. Contexto del Antiguo Testamento',
    contenido: 'El Antiguo Testamento surge en diálogo con culturas del antiguo Cercano Oriente: Egipto, Mesopotamia, Canaán. Comparte formas literarias y cosmovisiones, pero transforma profundamente sus contenidos desde la experiencia de un Dios único, justo y liberador. Las leyes, relatos y profecías de Israel nacen en contextos de éxodo, alianza, monarquía y exilio. La historia de Israel se interpreta a la luz de la fidelidad de Yahveh, que guía, corrige y salva a su pueblo. El AT no es solo historia, sino memoria creyente, marcada por una experiencia viva de Dios en medio del pueblo.'
  },
  {
    titulo: '6. Contexto del Nuevo Testamento',
    contenido: 'El Nuevo Testamento se escribe en un mundo helenizado y bajo dominio romano. Palestina es cruce de religiones, culturas y tensiones sociales. Jesús predica en un ambiente marcado por la esperanza mesiánica, la opresión imperial y la diversidad religiosa. Los evangelios, escritos en griego, recogen la tradición oral y la interpretan desde la fe pascual. Pablo y otros escritores dialogan con el pensamiento grecorromano, sin renunciar a las raíces judías. Así, el NT expresa el anuncio del Reino en categorías culturales plurales, mostrando que el Evangelio es para todos los pueblos, sin perder su identidad salvífica.'
  },
  {
    titulo: '7. La alianza como eje bíblico',
    contenido: 'La alianza es el hilo conductor de toda la Biblia. Desde Noé y Abraham hasta Moisés y David, Dios establece pactos que expresan su fidelidad gratuita y la vocación del pueblo a la obediencia y comunión. Estos pactos son signos históricos de la iniciativa divina. En Jesús, se cumple y supera toda alianza anterior: Él es el mediador de la nueva y eterna alianza, sellada en su sangre. Esta alianza no es ya externa o legal, sino interior y transformadora, inscrita en el corazón por el Espíritu. Así, la fe cristiana se comprende como alianza de amor irrevocable.'
  }
];
        temas.forEach((tema, i) => {
          const id = i + 1;
          menu.innerHTML += `
            <div>
              <button onclick="toggleContenido(${id})">${tema.titulo}</button>
              <div id="contenido${id}" class="acordeon-contenido"><p>${tema.contenido}</p></div>
            </div>
          `;
        });
      }
      menu.style.display = menu.style.display === "none" ? "block" : "none";
    }

    function toggleContenido(num) {
      const contenido = document.getElementById(`contenido${num}`);
      document.querySelectorAll(".acordeon-contenido").forEach(div => {
        if (div !== contenido) div.classList.remove("activo");
      });
      if (!contenido.classList.contains("activo")) {
        contenido.classList.add("activo");
        hablarConCallback(contenido.textContent.trim(), () => {});
      } else {
        contenido.classList.remove("activo");
        detenerVoz();
      }
    }

    function enviarPregunta() {
      const texto = document.getElementById("pregunta").value;
      const respuesta = `Gracias por tu pregunta. Aquí tienes una respuesta: ${texto}`;
      document.getElementById("respuesta").innerText = respuesta;
      hablar(respuesta);
    }

    function iniciarDictado() {
      const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
      recognition.lang = 'es-PE';
      recognition.start();
      recognition.onresult = event => {
        document.getElementById("pregunta").value = event.results[0][0].transcript;
      };
    }

    function hablar(texto) {
      speechSynthesis.cancel();
      const mensaje = new SpeechSynthesisUtterance(texto);
      mensaje.lang = 'es-PE';
      speechSynthesis.speak(mensaje);
    }

    function hablarConCallback(texto, callback) {
      speechSynthesis.cancel();
      const msg = new SpeechSynthesisUtterance(texto);
      msg.lang = "es-PE";
      msg.onend = callback;
      speechSynthesis.speak(msg);
    }

    function detenerVoz() {
      speechSynthesis.cancel();
    }

    function presentarseTito() {
      const saludo = "Hola, soy Tito, tu tutor virtual. Estoy para acompañarte en tu aprendizaje bíblico.";
      document.getElementById("presentacion-texto").textContent = saludo;
      hablar(saludo);
    }

    function titoBromea() {
      const mensaje = "¡Me haces cosquillas! ¿Quieres hacerme una pregunta?";
      document.getElementById("tito-img").src = "Tito riendo.png";
      document.getElementById("presentacion-texto").textContent = mensaje;
      hablar(mensaje);
      setTimeout(() => {
        document.getElementById("tito-img").src = "Tito parado.jpg";
        document.getElementById("presentacion-texto").textContent = "Hola soy Tito, tu tutor virtual. Estoy para acompañarte en tu aprendizaje bíblico.";
      }, 6000);
    }
  </script>
</body>
</html>











